<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · DaemonMode.jl</title><link rel="canonical" href="https://dmolina.github.io/DaemonMode.jl/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">DaemonMode.jl</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Usage"><span>Usage</span></a></li><li class="toplevel"><a class="tocitem" href="#Features"><span>Features</span></a></li></ul></li><li><a class="tocitem" href="quickstart/">Quick Start</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/dmolina/MoodleQuestions.jl/blob/master/docs/src/index.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h1><p>Julia is a great language, but the Just-in-Time compiler implies that loading a package could takes a considerable time, this is called the <em>first plot problem</em>. </p><p>It is true that this time is only required for the first time (and there are options, like using and the package <a href="https://github.com/timholy/Revise.jl">Revise</a>). However, it is a great disadvantage when we want to use Julia to create small scripts.</p><p>This package solve that problem. Inspired in the daemon-mode of Emacs, this package create a server/client model. This allow julia to run scripts a lot quickly scripts in Julia, because the package is maintained in memory between the run of several scripts (or run the same script several times).</p><h1 id="Usage"><a class="docs-heading-anchor" href="#Usage">Usage</a><a id="Usage-1"></a><a class="docs-heading-anchor-permalink" href="#Usage" title="Permalink"></a></h1><ul><li>The server is the responsible of running all julia scripts.</li></ul><pre><code class="language-julia">  julia -e &#39;using DaemonMode; serve()&#39;
  ```

- A client, that send to the server the file to run, and return the output
  obtained.
  
  ```julia
  julia -e &#39;using DaemonMode; runargs()&#39; program.jl &lt;arguments&gt;
  ```

  you can use an alias 
  ```sh
  alias juliaclient=&#39;julia -e &quot;using DaemonMode; runargs()&quot;&#39;
  ```
  
  then, instead of `julia program.jl` you can do `juliaclient program.jl`. The
  output should be the same, but with a lot less time.
  
# Process

The process is the following:

1. The client process sends the program *program.jl* with the required arguments
   to the server.
   
2. The server receives the program name, and run it, returning the output to the
   client process. 

3. The client process receives the output and show it to the console.

# Example

Supose that we have the script *test.jl*
</code></pre><p>julia using CSV, DataFrames</p><p>fname = only(ARGS) df = CSV.File(fname) |&gt; DataFrame println(first(df, 3))</p><pre><code class="language-none">
The normal method is:
</code></pre><p>sh $ time julia test.jl tsp_50.csv ... 3×2 DataFrame │ Row │ x        │ y          │ │     │ Float64  │ Float64    │ ├─────┼──────────┼────────────┤ │ 1   │ 0.420169 │ 0.628786   │ │ 2   │ 0.892219 │ 0.673288   │ │ 3   │ 0.530688 │ 0.00151249 │</p><p>real	0m18.831s user	0m18.670s sys	    0m0.476s</p><pre><code class="language-none">
Only loading the CSV, DataFrames, and reading a simple file takes 18 seconds in
my computer (I accept donnations :-)). Every time that you run the program is
going to take these 18 seconds. 

using DaemonMode:
</code></pre><p>sh $ julia -e &#39;using DaemonMode; serve()&#39; &amp; $ time juliaclient test.jl tsp_50.csv 3×2 DataFrames.DataFrame │ Row │ x        │ y          │ │     │ Float64  │ Float64    │ ├─────┼──────────┼────────────┤ │ 1   │ 0.420169 │ 0.628786   │ │ 2   │ 0.892219 │ 0.673288   │ │ 3   │ 0.530688 │ 0.00151249 │</p><p>real	0m18.596s user	0m0.329s sys	0m0.318s</p><pre><code class="language-none">
But next times, it only use:
</code></pre><p>sh $ time juliaclient test.jl tsp_50.csv 3×2 DataFrames.DataFrame │ Row │ x        │ y          │ │     │ Float64  │ Float64    │ ├─────┼──────────┼────────────┤ │ 1   │ 0.420169 │ 0.628786   │ │ 2   │ 0.892219 │ 0.673288   │ │ 3   │ 0.530688 │ 0.00151249 │</p><p>real	0m0.355s user	0m0.336s sys	0m0.317s</p><pre><code class="language-none">
A reduction from 18s to 0.3s, the next runs only time a 2% of the original time. 

Then you can change the file:
</code></pre><p>julia using CSV, DataFrames</p><p>fname = only(ARGS) df = CSV.File(fname) |&gt; DataFrame println(last(df, 10))</p><pre><code class="language-none">
Then, </code></pre><p>sh $ time juliaclient test2.jl tsp_50.csv 10×2 DataFrames.DataFrame │ Row │ x        │ y        │ │     │ Float64  │ Float64  │ ├─────┼──────────┼──────────┤ │ 1   │ 0.25666  │ 0.405932 │ │ 2   │ 0.266308 │ 0.426364 │ │ 3   │ 0.865423 │ 0.232437 │ │ 4   │ 0.462485 │ 0.049489 │ │ 5   │ 0.994926 │ 0.887222 │ │ 6   │ 0.867568 │ 0.302558 │ │ 7   │ 0.475654 │ 0.607708 │ │ 8   │ 0.18198  │ 0.592476 │ │ 9   │ 0.327458 │ 0.354397 │ │ 10  │ 0.765927 │ 0.806685 │</p><p>real	0m0.372s user	0m0.369s sys	0m0.300s ```</p><h1 id="Features"><a class="docs-heading-anchor" href="#Features">Features</a><a id="Features-1"></a><a class="docs-heading-anchor-permalink" href="#Features" title="Permalink"></a></h1><p>The advantages are:</p><ul><li><p>Performance, because the packages is maintained in memory. This is specially interesting with common external packages like CSV.jl, DataFrames, ...</p></li><li><p>The code is run using the current directory as working directory.</p></li><li><p>It accept parameters. </p></li></ul></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="quickstart/">Quick Start »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 24 July 2020 08:31">Friday 24 July 2020</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
